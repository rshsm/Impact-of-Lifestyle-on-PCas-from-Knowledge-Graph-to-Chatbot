!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.jsmini_clone={})}(this,function(r){"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function t(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=!!t,null===r)return"null";var n=e(r);if(t&&"number"===n&&isNaN(r))return"nan";if("object"!==n)return n;var o,a;try{o=p.call(r).slice(8,-1),a=o.toLowerCase()}catch(r){return"object"}if("object"!==a){if(t){if("number"===a&&isNaN(r))return"NaN";if("number"===a||"boolean"===a||"string"===a)return o}return a}if(r.constructor==Object)return a;try{if(null===Object.getPrototypeOf(r)||null===r.__proto__)return"object"}catch(r){}try{var i=r.constructor.name;if("string"==typeof i)return i}catch(r){}return"unknown"}function n(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function o(r){var e=t(r);return"object"===e||"array"===e}function a(r){if(!o(r))return r;var e,i=t(r);if("array"===i){e=[];for(var c=0;c<r.length;c++)e[c]=r[c]===r?e:a(r[c])}else if("object"===i){e={};for(var f in r)n(r,f)&&(e[f]=r[f]===r?e:a(r[f]))}return e}function i(r){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!o(r))return r;try{return JSON.parse(JSON.stringify(r))}catch(r){if(!0===e)throw r;try{console.error("cloneJSON error: "+r.message)}catch(r){}return e}}function c(r){var e=t(r),a=r;"array"===e?a=[]:"object"===e&&(a={});for(var i=[{parent:a,key:void 0,data:r}];i.length;){var c=i.pop(),f=c.parent,u=c.key,y=c.data,p=t(y),l=f;if(void 0!==u&&(l=f[u]="array"===p?[]:{}),"array"===p)for(var s=0;s<y.length;s++)y[s]===y?l[s]=l:o(y[s])?i.push({parent:l,key:s,data:y[s]}):l[s]=y[s];else if("object"===p)for(var h in y)n(y,h)&&(y[h]===y?l[h]=l:o(y[h])?i.push({parent:l,key:h,data:y[h]}):l[h]=y[h])}return a}function f(){this.cacheArray=[]}function u(){var r;return"undefined"!=typeof WeakMap&&"function"==t(WeakMap)&&(r=new WeakMap,"weakmap"==t(r))?r:r=new f}function y(r){var e=u(),a=t(r),i=r;"array"===a?i=[]:"object"===a&&(i={});for(var c=[{parent:i,key:void 0,data:r}];c.length;){var f=c.pop(),y=f.parent,p=f.key,s=f.data,h=t(s),v=y;if(void 0!==p&&(v=y[p]="array"===h?[]:{}),o(s)){var b=e.get(s);if(b){y[p]=b;continue}e.set(s,v)}if("array"===h)for(var d=0;d<s.length;d++)o(s[d])?c.push({parent:v,key:d,data:s[d]}):v[d]=s[d];else if("object"===h)for(var g in s)if(n(s,g)){if(g===l)continue;o(s[g])?c.push({parent:v,key:g,data:s[g]}):v[g]=s[g]}}return e.clear&&e.clear(),i}var p=Object.prototype.toString,l="com.yanhaijing.jsmini.clone"+(new Date).getTime();f.prototype.set=function(r,e){this.cacheArray.push(r),r[l]=e},f.prototype.get=function(r){return r[l]},f.prototype.clear=function(){for(var r=0;r<this.cacheArray.length;r++){delete this.cacheArray[r][l]}this.cacheArray.length=0},r.clone=a,r.cloneJSON=i,r.cloneLoop=c,r.cloneForce=y,Object.defineProperty(r,"__esModule",{value:!0})});
